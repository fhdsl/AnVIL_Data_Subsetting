<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Run the Workflow | AnVIL Book: Subsetting Your Data with WDL</title>
  <meta name="description" content="Description about Course/Book." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Run the Workflow | AnVIL Book: Subsetting Your Data with WDL" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Description about Course/Book." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Run the Workflow | AnVIL Book: Subsetting Your Data with WDL" />
  
  <meta name="twitter:description" content="Description about Course/Book." />
  



<meta name="date" content="2023-08-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/AnVIL_style/anvil_favicon.ico" type="image/x-icon" />
<link rel="prev" href="set-up-the-workflow.html"/>
<link rel="next" href="about-the-authors.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id={MeasurementID}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '{MeasurementID}');
</script>




<link rel="stylesheet" href="assets/style.css" type="text/css" />
<link rel="stylesheet" href="assets/AnVIL_style/anvil.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="https://anvilproject.org/" target="_blank"><img src="assets/AnVIL_style/logo-anvil.png" style="width: 80%; padding-left: 15px; padding-top: 8px;"</a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Book</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#skills-level"><i class="fa fa-check"></i>Skills Level</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#learning-objectives"><i class="fa fa-check"></i>Learning Objectives</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#anvil-collection"><i class="fa fa-check"></i>AnVIL Collection</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#the-anvil-platform"><i class="fa fa-check"></i><b>1.1</b> The AnVIL Platform</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#subsetting-genomic-data"><i class="fa fa-check"></i><b>1.2</b> Subsetting Genomic Data</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#subsetting-data-on-anvil"><i class="fa fa-check"></i><b>1.3</b> Subsetting Data on AnVIL</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="bringing-the-wdl-workflow-to-anvil.html"><a href="bringing-the-wdl-workflow-to-anvil.html"><i class="fa fa-check"></i><b>2</b> Bringing the WDL Workflow to AnVIL</a>
<ul>
<li class="chapter" data-level="2.1" data-path="bringing-the-wdl-workflow-to-anvil.html"><a href="bringing-the-wdl-workflow-to-anvil.html#find-the-workflow-on-dockstore"><i class="fa fa-check"></i><b>2.1</b> Find the Workflow on Dockstore</a></li>
<li class="chapter" data-level="2.2" data-path="bringing-the-wdl-workflow-to-anvil.html"><a href="bringing-the-wdl-workflow-to-anvil.html#send-the-workflow-to-anvil"><i class="fa fa-check"></i><b>2.2</b> Send the Workflow to AnVIL</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="set-up-the-workflow.html"><a href="set-up-the-workflow.html"><i class="fa fa-check"></i><b>3</b> Set Up the Workflow</a>
<ul>
<li class="chapter" data-level="3.1" data-path="set-up-the-workflow.html"><a href="set-up-the-workflow.html#set-up-inputs"><i class="fa fa-check"></i><b>3.1</b> Set Up Inputs</a></li>
<li class="chapter" data-level="3.2" data-path="set-up-the-workflow.html"><a href="set-up-the-workflow.html#set-up-outputs"><i class="fa fa-check"></i><b>3.2</b> Set Up Outputs</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="run-the-workflow.html"><a href="run-the-workflow.html"><i class="fa fa-check"></i><b>4</b> Run the Workflow</a>
<ul>
<li class="chapter" data-level="4.1" data-path="run-the-workflow.html"><a href="run-the-workflow.html#start-the-run"><i class="fa fa-check"></i><b>4.1</b> Start the Run</a></li>
<li class="chapter" data-level="4.2" data-path="run-the-workflow.html"><a href="run-the-workflow.html#monitor-the-run"><i class="fa fa-check"></i><b>4.2</b> Monitor the Run</a></li>
<li class="chapter" data-level="4.3" data-path="run-the-workflow.html"><a href="run-the-workflow.html#inspect-the-run-results"><i class="fa fa-check"></i><b>4.3</b> Inspect the Run Results</a></li>
<li class="chapter" data-level="4.4" data-path="run-the-workflow.html"><a href="run-the-workflow.html#inspecting-other-run-files"><i class="fa fa-check"></i><b>4.4</b> Inspecting Other Run Files</a></li>
<li class="chapter" data-level="4.5" data-path="run-the-workflow.html"><a href="run-the-workflow.html#confirming-results-in-the-data-tab"><i class="fa fa-check"></i><b>4.5</b> Confirming Results in the DATA tab</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="divider"></li>
<p style="text-align:center;"> <a href="https://github.com/jhudsl/OTTR_Template" target="blank" > This content was published with</a> <a href="https://bookdown.org/" target="blank"> bookdown by: </a> </p>
<p style="text-align:center;"> <a href="https://hutchdatascience.org/"> The Fred Hutch Data Science Lab </a></p>
<a href="https://hutchdatascience.org/" target="_blank"><img src="https://raw.githubusercontent.com/jhudsl/OTTR_Template/main/style-sets/fhdasl/copy_to_assets/big-dasl-stacked.png" style="width: 80%; padding-left: 34px; padding-top: 8px;"</a>
<p style="text-align:center; font-size: 12px;"> <a href="https://github.com/rstudio4edu/rstudio4edu-book/"> Style adapted from: rstudio4edu-book </a> <a href ="https://creativecommons.org/licenses/by/2.0/"> (CC-BY 2.0) </a></p>
<p style="padding-left: 40px;"><div class="trapezoid" style = "padding-left: 40px;"><span><a href="https://docs.google.com/forms/d/e/1FAIpQLScrDVb_utm55pmb_SHx-RgELTEbCCWdLea0T3IzS0Oj00GE4w/viewform?usp=pp_url&entry.1565230805=AnVIL+Book:+Subsetting+Your+Data+with+WDL"> Click here to provide feedback</a> <img src="assets/itcr_arrow.png" style=" width: 10%" ></span></div></p>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">AnVIL Book: Subsetting Your Data with WDL</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <!--<script src="assets/hideOutput.js"></script>-->
</head>
        


<div class="hero-image-container"> 
  <img class= "hero-image" src="assets/AnVIL_style/dasl_thin_main_image.png">
</div>
<div id="run-the-workflow" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Run the Workflow</h1>
<div id="start-the-run" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Start the Run</h2>
<p>Once you have saved the inputs and outputs, click on RUN ANALYSIS.</p>
<p><img src="02-workflow_files/figure-html/1zUiupDXMZlZEIditsN5igggOim9qIrR9Ckf4N8fSAB8_g2794677b0ab_0_76.png" title="The RUN ANALYSIS button is highlighted." alt="The RUN ANALYSIS button is highlighted." width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="monitor-the-run" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Monitor the Run</h2>
<p>Navigate to the JOB HISTORY tab. You can see your most recent submissions in table form. Click on the most recent submission. Notice how each sample gets its own job. This keeps the whole process speedy!</p>
<p><img src="02-workflow_files/figure-html/1zUiupDXMZlZEIditsN5igggOim9qIrR9Ckf4N8fSAB8_g2794677b0ab_0_81.png" title="The page reflects submission IDs and time submitted. Several runs have launched for each sample. The workflow status is 'Running' for all 8 samples." alt="The page reflects submission IDs and time submitted. Several runs have launched for each sample. The workflow status is 'Running' for all 8 samples." width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="inspect-the-run-results" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Inspect the Run Results</h2>
<p>You should see the status change to “Succeeded” if everything completed correctly.</p>
<p><img src="02-workflow_files/figure-html/1zUiupDXMZlZEIditsN5igggOim9qIrR9Ckf4N8fSAB8_g2794677b0ab_0_86.png" title="Workflow status is now succeeded for all 8 samples, with a check mark." alt="Workflow status is now succeeded for all 8 samples, with a check mark." width="100%" style="display: block; margin: auto;" /></p>
<div class="notice">
<p>After 24 hours, you can also see the costs associated with each run under “Run Cost”.</p>
</div>
</div>
<div id="inspecting-other-run-files" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Inspecting Other Run Files</h2>
<p>It can be helpful to look at intermediate files on Google Cloud Platform, especially if runs did not complete successfully. You can view these files by clicking on the folder icon for “Execution directory”.</p>
<p><img src="02-workflow_files/figure-html/1zUiupDXMZlZEIditsN5igggOim9qIrR9Ckf4N8fSAB8_g2794677b0ab_0_92.png" title="The folder icon indicating execution directory besides the workflow job for one sample is highlighted." alt="The folder icon indicating execution directory besides the workflow job for one sample is highlighted." width="100%" style="display: block; margin: auto;" /></p>
<p>For each run, you can see a number of associated files, including the output <code>.fq</code> files and log files.</p>
<p><img src="02-workflow_files/figure-html/1zUiupDXMZlZEIditsN5igggOim9qIrR9Ckf4N8fSAB8_g2794677b0ab_0_97.png" title="Files for the workflow on GCP are shown. There are two fastq files that were created as well as 3 log files that are relevant for debugging, including sample_file.log, stderr, and stdout." alt="Files for the workflow on GCP are shown. There are two fastq files that were created as well as 3 log files that are relevant for debugging, including sample_file.log, stderr, and stdout." width="100%" style="display: block; margin: auto;" /></p>
<p>Click on <code>stdout</code> and/or <code>stderr</code> and “DOWNLOAD” to view the terminal output.</p>
<p><img src="02-workflow_files/figure-html/1zUiupDXMZlZEIditsN5igggOim9qIrR9Ckf4N8fSAB8_g2794677b0ab_0_109.png" title="The DOWNLOAD button is highlighted." alt="The DOWNLOAD button is highlighted." width="100%" style="display: block; margin: auto;" /></p>
<p>Here is what your output in <code>stdout</code> might look like.</p>
<p><img src="02-workflow_files/figure-html/1zUiupDXMZlZEIditsN5igggOim9qIrR9Ckf4N8fSAB8_g2794677b0ab_0_125.png" title="Terminal monospace text shows the following: Creating a subsampled file with 20000 lines. Created SRR10152993_1_subsample.fq. Subsampling paired-end reads for SRR10152993. Created SRR10152993_2_subsample.fq." alt="Terminal monospace text shows the following: Creating a subsampled file with 20000 lines. Created SRR10152993_1_subsample.fq. Subsampling paired-end reads for SRR10152993. Created SRR10152993_2_subsample.fq." width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="confirming-results-in-the-data-tab" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Confirming Results in the DATA tab</h2>
<p>We can see that the subsample files have been linked in the DATA table “sample”.</p>
<p><img src="02-workflow_files/figure-html/1zUiupDXMZlZEIditsN5igggOim9qIrR9Ckf4N8fSAB8_g2794677b0ab_0_139.png" title="On the DATA tab of the workspace, a new column has been created called read1_subsample. There are 8 files corresponding to each original file." alt="On the DATA tab of the workspace, a new column has been created called read1_subsample. There are 8 files corresponding to each original file." width="100%" style="display: block; margin: auto;" /></p>
<p>In our example, we have a mixture of single-end and paired-end reads, so only the paired-end samples get a second file.</p>
<p><img src="02-workflow_files/figure-html/1zUiupDXMZlZEIditsN5igggOim9qIrR9Ckf4N8fSAB8_g2794677b0ab_0_144.png" title="On the DATA tab of the workspace, a new column has been created called read2_subsample. There are 4 files corresponding to each original file that had paired-end reads." alt="On the DATA tab of the workspace, a new column has been created called read2_subsample. There are 4 files corresponding to each original file that had paired-end reads." width="100%" style="display: block; margin: auto;" /></p>
<p>You should now be able to use the subset files for downstream applications!</p>

</div>
</div>
<hr>
<center> 
  <div class="footer">
      All illustrations <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY. </a>
      <br>
      All other materials <a href= "https://creativecommons.org/licenses/by/4.0/"> CC-BY </a> unless noted otherwise.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="set-up-the-workflow.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="about-the-authors.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
